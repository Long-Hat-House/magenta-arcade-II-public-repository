[gd_scene load_steps=8 format=3 uid="uid://esb024gsjdn7"]

[ext_resource type="PackedScene" uid="uid://crf8xjatam6o0" path="res://elements/enemy/saw/enemy_saw_1_radius.tscn" id="1_d26ef"]
[ext_resource type="PackedScene" uid="uid://dn0s0xci4vhwr" path="res://elements/enemy/saw/mesh/mesh_saw.tscn" id="2_beajk"]
[ext_resource type="Material" uid="uid://r1m6m874b01v" path="res://elements/m_simple_color_emission.tres" id="3_71mmq"]
[ext_resource type="Script" uid="uid://cr5xxhd04vkgu" path="res://addons/gap/api/accessibility_high_contrast_object.gd" id="4_34unw"]

[sub_resource type="BoxShape3D" id="BoxShape3D_oy2cb"]
size = Vector3(7.5, 0.25, 0.25)

[sub_resource type="GDScript" id="GDScript_uan5g"]
resource_name = "RotatingSaw"
script/source = "extends Node

@export var rotating:Node3D;
@export var initial_rotation:float = 90;
@export var initial_rotation_rand:float = 10;
@export var rotation_velocity:float = 6;
@export var rotation_velocity_rand:float = 3;

var velocity:float;

func _ready() -> void:
	rotating.rotation_degrees = Vector3.UP * (initial_rotation + randf_range(-initial_rotation_rand, initial_rotation_rand) * 0.5);
	velocity = rotation_velocity + randf_range(-rotation_velocity_rand, rotation_velocity_rand) * 0.5;
	velocity *= -1.0 if randf() < 0.5 else 1.0;

func _process(delta: float) -> void:
	rotating.rotation_degrees.y += delta * velocity;
"

[sub_resource type="QuadMesh" id="QuadMesh_3ffib"]
material = ExtResource("3_71mmq")
size = Vector2(7.5, 0.35)
orientation = 1

[node name="EnemySaw_Box" instance=ExtResource("1_d26ef")]
velocity = 8.0

[node name="CollisionShape3D" parent="." index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0318909, 0.483307, 0)
shape = SubResource("BoxShape3D_oy2cb")

[node name="saw" parent="." index="2"]
visible = false

[node name="Rotating" type="Node" parent="." index="3" node_paths=PackedStringArray("rotating")]
script = SubResource("GDScript_uan5g")
rotating = NodePath("..")

[node name="saw2" parent="." index="4" instance=ExtResource("2_beajk")]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, -3.75, 0.5, 0)

[node name="saw3" parent="." index="5" instance=ExtResource("2_beajk")]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, -2.5, 0.5, 0)

[node name="saw4" parent="." index="6" instance=ExtResource("2_beajk")]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, -1.25, 0.5, 0)

[node name="saw5" parent="." index="7" instance=ExtResource("2_beajk")]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, 0, 0.5, 0)

[node name="saw6" parent="." index="8" instance=ExtResource("2_beajk")]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, 1.25, 0.5, 0)

[node name="saw7" parent="." index="9" instance=ExtResource("2_beajk")]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, 2.5, 0.5, 0)

[node name="saw8" parent="." index="10" instance=ExtResource("2_beajk")]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, 3.75, 0.5, 0)

[node name="Fita" type="MeshInstance3D" parent="." index="11"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
instance_shader_parameters/color = Color(0.376471, 0, 0.258824, 1)
mesh = SubResource("QuadMesh_3ffib")

[node name="AccessibilityHighContrastObject" type="Node" parent="." index="12"]
script = ExtResource("4_34unw")
high_contrast_group = &"danger"
metadata/_custom_type_script = "uid://cr5xxhd04vkgu"
