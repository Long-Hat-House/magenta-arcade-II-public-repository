[gd_scene load_steps=14 format=3 uid="uid://b0fndb1s4bnvp"]

[ext_resource type="Script" uid="uid://cnawvctgilepd" path="res://systems/pressable/holdable.gd" id="1_inmgv"]
[ext_resource type="WwiseEvent" uid="uid://c5ausye44wl0" path="res://Wwise/resources/Event/{BFDEDA07-587D-4063-B14A-3576E5D0AB1B}.tres" id="2_qe6nd"]
[ext_resource type="Material" uid="uid://b10j3eqrrqcqj" path="res://elements/neutral/interactables/holdable_buttons/holdable_button_play/material/m_altar_btn_play_base.tres" id="3_i25os"]
[ext_resource type="WwiseEvent" uid="uid://covnkj8eim0g1" path="res://Wwise/resources/Event/{B4199BE6-29B8-4E6F-B05C-0025FBC4AD50}.tres" id="3_uwc2d"]
[ext_resource type="PackedScene" uid="uid://c4pynoycp3a7l" path="res://elements/neutral/interactables/holdable_buttons/holdable_button_play/mesh/mesh_altar_btn_play.tscn" id="4_7s2yo"]
[ext_resource type="Script" uid="uid://cw4qh8hx2nyh0" path="res://systems/pressable/holdable_button_graphic.gd" id="4_dy1fx"]
[ext_resource type="Material" uid="uid://27tad3poms25" path="res://elements/neutral/interactables/holdable_buttons/holdable_button_play/material/m_altar_btn_play_emissive.tres" id="5_ja11j"]
[ext_resource type="Script" uid="uid://cr5xxhd04vkgu" path="res://addons/gap/api/accessibility_high_contrast_object.gd" id="6_uwc2d"]
[ext_resource type="PackedScene" uid="uid://brxg5f374xr1a" path="res://elements/powerups/button/holdable_charging_feedback.tscn" id="9_r6vyj"]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_xq0xn"]
height = 0.5
radius = 0.6

[sub_resource type="Animation" id="Animation_j3c8m"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Area3D/button_graphic/button_parent/altar_btn_play/btn_play:surface_material_override/1:emission_energy_multiplier")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [8.91]
}

[sub_resource type="Animation" id="Animation_c1xeu"]
resource_name = "idle"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Area3D/button_graphic/button_parent/altar_btn_play/btn_play:surface_material_override/1:emission_energy_multiplier")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 1),
"transitions": PackedFloat32Array(-2, 0.5, 2),
"update": 0,
"values": [0.3, 3.0, 0.3]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_o8034"]
_data = {
&"RESET": SubResource("Animation_j3c8m"),
&"idle": SubResource("Animation_c1xeu")
}

[node name="HoldableButtonPlay" type="Node3D" node_paths=PackedStringArray("button_pressed_feedback", "button_graphic")]
script = ExtResource("1_inmgv")
hold_finished_mode = 2
button_pressed_feedback = NodePath("button_pressed_feedback")
button_graphic = NodePath("Area3D/button_graphic")
pressable_tether_distance = 2.0
_sfx_pressed = ExtResource("2_qe6nd")
_sfx_released = ExtResource("3_uwc2d")

[node name="Area3D" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.175618, 0, 0.0770077)
collision_layer = 32
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.2502, 0)
shape = SubResource("CylinderShape3D_xq0xn")

[node name="button_base" parent="Area3D" instance=ExtResource("4_7s2yo")]
transform = Transform3D(1.3, 0, 0, 0, 0.4, 0, 0, 0, 1.2, 0, 0, 0)

[node name="btn_play" parent="Area3D/button_base" index="0"]
surface_material_override/0 = ExtResource("3_i25os")

[node name="AccessibilityHighContrastObject" type="Node" parent="Area3D/button_base/btn_play" index="0"]
script = ExtResource("6_uwc2d")
high_contrast_group = &"interactable"
metadata/_custom_type_script = "uid://cr5xxhd04vkgu"

[node name="button_graphic" type="Node3D" parent="Area3D" node_paths=PackedStringArray("_button_parent", "_mesh_container", "_icon_sprite")]
script = ExtResource("4_dy1fx")
_button_parent = NodePath("button_parent")
_mesh_container = NodePath("button_parent/altar_btn_play")
_icon_sprite = NodePath("button_parent/Sprite3D")
_material_to_set_colors = ExtResource("5_ja11j")

[node name="button_parent" type="Node3D" parent="Area3D/button_graphic"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.4, 0)

[node name="altar_btn_play" parent="Area3D/button_graphic/button_parent" instance=ExtResource("4_7s2yo")]

[node name="Sprite3D" type="Sprite3D" parent="Area3D/button_graphic/button_parent"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, -0.083, 1.117, 0)
visible = false
modulate = Color(0, 0.352941, 0.666667, 1)
pixel_size = 0.006

[node name="button_pressed_feedback" parent="." instance=ExtResource("9_r6vyj")]
visible = false

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_o8034")
}
autoplay = "idle"

[connection signal="body_entered" from="Area3D" to="." method="_on_area_3d_body_entered"]
[connection signal="body_exited" from="Area3D" to="." method="_on_area_3d_body_exited"]

[editable path="Area3D/button_base"]
[editable path="Area3D/button_graphic/button_parent/altar_btn_play"]
